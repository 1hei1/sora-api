<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sora API - 配置管理</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/admin.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h1 class="my-4">Sora API - 配置管理</h1>
        
        <div id="messages" class="mb-4"></div>
        
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">系统配置</h5>
            </div>
            <div class="card-body">
                <form id="configForm">
                    <div class="mb-3">
                        <label class="form-label fw-bold">HTTP代理设置</label>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="proxy_host" class="form-label">代理主机</label>
                                <input type="text" class="form-control" id="proxy_host" placeholder="例如: 127.0.0.1">
                            </div>
                            <div class="col-md-6">
                                <label for="proxy_port" class="form-label">代理端口</label>
                                <input type="text" class="form-control" id="proxy_port" placeholder="例如: 7890">
                            </div>
                        </div>
                        <div class="mt-3">
                            <label class="form-label">代理认证 (可选)</label>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="proxy_user" class="form-label">用户名</label>
                                    <input type="text" class="form-control" id="proxy_user" placeholder="代理用户名">
                                </div>
                                <div class="col-md-6">
                                    <label for="proxy_pass" class="form-label">密码</label>
                                    <input type="password" class="form-control" id="proxy_pass" placeholder="代理密码">
                                </div>
                            </div>
                        </div>
                        <div class="form-text text-muted mt-2">如需使用代理访问Sora API，请填写以上信息，留空表示不使用代理</div>
                    </div>
                    
                    <hr>
                    
                    <div class="mb-3">
                        <label class="form-label fw-bold">图片本地化设置</label>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="image_localization">
                            <label class="form-check-label" for="image_localization">启用图片本地化</label>
                        </div>
                        <div class="form-text text-muted">启用后，Sora生成的图片将被下载并保存到本地服务器，避免客户端无法访问外部链接的问题</div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="image_save_dir" class="form-label">图片保存目录</label>
                        <input type="text" class="form-control" id="image_save_dir" placeholder="src/static/images">
                        <div class="form-text text-muted">相对于工作目录的路径，必须确保目录存在且有写入权限</div>
                    </div>
                    
                    <button type="button" id="saveConfig" class="btn btn-primary">保存配置</button>
                </form>
            </div>
        </div>
        
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">帮助说明</h5>
            </div>
            <div class="card-body">
                <p><strong>HTTP代理设置：</strong></p>
                <ul>
                    <li>如果您的服务器无法直接访问Sora API，可以配置HTTP代理</li>
                    <li>代理认证是可选的，如果您的代理服务器不需要认证，请留空</li>
                    <li>在Docker环境中，代理主机通常设置为<code>host.docker.internal</code>而不是<code>127.0.0.1</code></li>
                </ul>
                
                <p><strong>图片本地化功能说明：</strong></p>
                <ul>
                    <li>本功能解决Sora图片URL无法访问的问题，将生成的图片保存到本地服务器</li>
                    <li>启用后，系统会自动下载Sora返回的图片并存储到指定目录</li>
                    <li>API返回的图片链接将替换为本地URL地址</li>
                    <li>确保配置的保存目录有足够的磁盘空间和访问权限</li>
                </ul>
                <p class="text-warning"><strong>注意：</strong> 配置变更会立即生效，但不会影响已经生成的图片</p>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/config.js"></script>
</body>
</html> 